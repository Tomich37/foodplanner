{% if recipes %}
<div class="recipes-grid" data-recipes-grid>
    {% for recipe in recipes %}
    <article class="recipe-card">
        <img src="{{ cover_url(recipe) }}" alt="{{ recipe.title }}" class="recipe-card__image" />
        <div class="recipe-card__body">
            <div class="recipe-card__top">
                <h3 class="recipe-card__title">{{ recipe.title }}</h3>
                <span class="badge">
                    {{ recipe.author.full_name or recipe.author.email }}
                </span>
            </div>
            <p class="recipe-card__description{% if not recipe.description %} recipe-card__description--empty{% endif %}">
                {% if recipe.description %}
                {{ recipe.description }}
                {% else %}
                &nbsp;
                {% endif %}
            </p>
            <div class="recipe-card__tags{% if not recipe.tags %} recipe-card__tags--empty{% endif %}">
                {% if recipe.tags %}
                {% for tag in recipe.tags %}
                <span class="badge badge--tag">
                    {{ tag_labels.get(tag, tag) if tag_labels else tag }}
                </span>
                {% endfor %}
                {% endif %}
            </div>
            <div class="recipe-card__meta">
                <span>Шагов: {{ recipe.steps | length }}</span>
                <span>Ингредиентов: {{ recipe.ingredients | length }}</span>
            </div>
            <div class="recipe-card__actions">
                <a
                    href="{{ url_for('recipe_detail', recipe_id=recipe.id) }}"
                    class="btn btn--small btn--primary"
                    >Открыть</a
                >
                {% if current_user and (recipe.user_id == current_user.id or current_user.is_admin) %}
                <a
                    href="{{ url_for('recipes_edit', recipe_id=recipe.id) }}"
                    class="btn btn--small btn--ghost"
                    >Редактировать</a
                >
                {% endif %}
            </div>
        </div>
    </article>
    {% endfor %}
</div>
{% else %}
<p class="recipes-list__empty" data-recipes-empty>
    По этому запросу пока ничего не найдено. Попробуйте поменять поиск или теги.
</p>
{% endif %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>{% block title %}FoodPlanner{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}" />
    {% block extra_styles %}{% endblock %}
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', path='/templates/favicon.ico') }}" />
</head>
<body>
<header class="header">
    <div class="container header__inner">
        <a href="{{ url_for('index') }}" class="logo" data-nav-home>FoodPlanner</a>
        <button class="nav-toggle" data-nav-toggle aria-label="Переключить меню">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <nav class="nav" data-nav-menu>
            {% set current_path = request.url.path %}
            <a
                href="/"
                class="nav__link {% if current_path == '/' %}nav__link--active{% endif %}"
                >Главная</a
            >
            <a
                href="{{ url_for('recipes_list') }}"
                class="nav__link {% if current_path.startswith('/recipes') %}nav__link--active{% endif %}"
                >Рецепты</a
            >
            <a
                href="{{ url_for('menu_list') }}"
                class="nav__link {% if current_path.startswith('/menu') %}nav__link--active{% endif %}"
                >Планы питания</a
            >
            {% if current_user and current_user.is_admin %}
            <a
                href="{{ url_for('admin_users') }}"
                class="nav__link {% if current_path.startswith('/admin') %}nav__link--active{% endif %}"
                >Админка</a
            >
            {% endif %}
            {% if current_user %}
            <a
                href="{{ url_for('profile') }}"
                class="nav__link {% if current_path.startswith('/profile') %}nav__link--active{% endif %}"
                >Профиль</a
            >
            {% endif %}
        </nav>
        {% if current_user %}
        <div class="header__profile">
            <div class="avatar">
                {{ (current_user.full_name or current_user.email)[0]|upper }}
            </div>
            <div class="profile-info">
                <div class="profile-name">
                    {{ current_user.full_name or current_user.email }}
                </div>
                <a href="{{ url_for('logout') }}" class="profile-logout">Выйти</a>
            </div>
        </div>
        {% else %}
        <div class="header__auth">
            <a href="{{ url_for('login_form') }}" class="btn btn--ghost btn--small">Войти</a>
            <a href="{{ url_for('register_form') }}" class="btn btn--primary btn--small"
                >Регистрация</a
            >
        </div>
        {% endif %}
    </div>
</header>

<main>
    {% block content %}{% endblock %}
</main>

<footer class="footer">
    <div class="container footer__inner">
        <div>© {{ 2025 }} FoodPlanner</div>
        <div class="footer__links">
            <a href="#">О компании</a>
            <a href="#">Политика</a>
            <a href="#">Партнёрская программа</a>
        </div>
    </div>
</footer>

<script src="{{ url_for('static', path='/js/layout.js') }}" defer></script>
{% block extra_scripts %}{% endblock %}
</body>
</html>

{% extends "base.html" %}

{% block title %}Рецепты сообщества · FoodPlanner{% endblock %}

{% block content %}
<section class="recipes-list">
    <div class="container">
        <div class="recipes-list__header">
            <div>
                <h1>Рецепты сообщества</h1>
                <p class="recipes-list__subtitle">
                    Здесь собраны все блюда, которые пользователи уже поделились в FoodPlanner.
                    Добавляйте свои идеи и сохраняйте понравившиеся рецепты.
                </p>
            </div>
            {% if current_user %}
            <a href="{{ url_for('recipes_new') }}" class="btn btn--primary">Создать рецепт</a>
            {% endif %}
        </div>
        <div class="recipes-filters">
            <form
                class="recipes-search"
                method="get"
                data-recipes-search
                data-search-url="{{ url_for('recipes_search') }}"
            >
                <input
                    id="recipes-search-input"
                    type="search"
                    name="q"
                    placeholder="Поиск по названию или ингредиентам"
                    value="{{ search_query or '' }}"
                    aria-label="Поиск по названию или ингредиентам"
                />
                {% for tag in selected_tags %}
                <input type="hidden" name="tags" value="{{ tag }}" />
                {% endfor %}
                <div class="recipes-search__actions">
                    <button type="submit" class="btn btn--primary btn--small">Искать</button>
                    {% if search_query %}
                    <button type="button" class="btn btn--ghost btn--small" data-clear-search>Сбросить поиск</button>
                    {% endif %}
                </div>
            </form>
            {% if available_tags %}
            <div class="recipes-filters__tags">
                <div class="tag-selector">
                    {% for tag in available_tags %}
                    <button
                        type="button"
                        class="btn btn--ghost tag-button {% if selected_tags and tag.value in selected_tags %}tag-button--active{% endif %}"
                        data-filter-tag="{{ tag.value }}"
                    >
                        {{ tag.label }}
                    </button>
                    {% endfor %}
                </div>
                {% if selected_tags %}
                <button type="button" class="btn btn--ghost" data-reset-tags>Сбросить теги</button>
                {% endif %}
            </div>
            {% endif %}
        </div>
        <div class="recipes-results" data-recipes-results>
            {% include "partials/recipes_grid.html" %}
        </div>
    </div>
</section>
{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{{ url_for('static', path='/css/pages/recipes.css') }}" />
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', path='/js/recipes.js') }}" defer></script>
{% endblock %}

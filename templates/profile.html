{% extends "base.html" %}

{% block title %}Личный кабинет · FoodPlanner{% endblock %}

{% block content %}
<section class="profile">
    <div class="container">
        <div class="profile__card">
            <h1>Личный кабинет</h1>
            <p class="profile__subtitle">Обновите пароль, чтобы защитить свой аккаунт.</p>

            <div class="profile__info">
                <div><strong>E-mail:</strong> {{ current_user.email }}</div>
                {% if current_user.full_name %}
                <div><strong>Имя:</strong> {{ current_user.full_name }}</div>
                {% endif %}
                <div><strong>Зарегистрирован:</strong> {{ current_user.created_at.strftime('%d.%m.%Y') if current_user.created_at else '—' }}</div>
            </div>

            {% if errors %}
            <div class="alert alert--error">
                <ul>
                    {% for error in errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            {% if success %}
            <div class="alert alert--success">
                {{ success }}
            </div>
            {% endif %}

            <form method="post" action="{{ url_for('profile_change_password') }}" class="profile__form">
                <div class="form-group">
                    <label for="current_password">Текущий пароль</label>
                    <input type="password" id="current_password" name="current_password" required />
                </div>
                <div class="form-group">
                    <label for="new_password">Новый пароль</label>
                    <input type="password" id="new_password" name="new_password" minlength="6" required />
                </div>
                <div class="form-group">
                    <label for="confirm_password">Повторите новый пароль</label>
                    <input type="password" id="confirm_password" name="confirm_password" minlength="6" required />
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn--primary">Обновить пароль</button>
                    <a href="/" class="btn btn--ghost">На главную</a>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}
